name: Create repo via issue form

run-name: Execute create repo request from @${{ github.actor }}

on:
    issues:
        types: 
            - opened
            - edited

jobs:
    create-repo:
        name: Create repo via issue-form
        runs-on: ubuntu-latest
        steps:
            - name: checkout repo
              uses: actions/checkout@v3

            - name: Create repo
              id: create_repo
              uses: actions/github-script@v6
              env:
                APP_ID: ${{ secrets.APP_ID }}
                APP_PRIVATE_KEY: ${{ secrets.APP_PRIVATE_KEY }}
                INSTALLATION_ID: ${{ secrets.INSTALLATION_ID }}
              with:
                script: | 
                  const script = require('${{github.workspace}}/main.js')
                  await script({context, core})

              